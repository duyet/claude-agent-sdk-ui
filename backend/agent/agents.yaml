# agents.yaml - Top-level agent definitions
# Each agent has a unique ID format: {name}-{unique_suffix}
#
# NOTE: system_prompt is APPENDED to the default claude_code prompt,
# not replacing it. This preserves all tool usage instructions and
# safety guidelines from the SDK. Only add role-specific instructions.

_defaults:
  tools:
    - Skill
    - Task
    - Read
    - Write
    - Edit
    - Bash
    - Grep
    - Glob
  model: sonnet
  permission_mode: acceptEdits
  include_partial_messages: true
  setting_sources:
    - project
  cwd: null  # null = PROJECT_ROOT
  disallowed_tools: []
  mcp_servers: {}
  allowed_directories:
    - /tmp
  with_permissions: true  # Enable permission hooks to restrict file operations

default_agent: general-agent-a1b2c3d4

agents:
  general-agent-a1b2c3d4:
    name: "General Assistant"
    description: "General-purpose coding assistant for everyday tasks"
    system_prompt: |
      You are a helpful coding assistant. You can help with:
      - Writing and reviewing code
      - Debugging and troubleshooting
      - Explaining concepts and documentation
      - Project setup and configuration

      IMPORTANT: When the user's request is ambiguous or you need clarification,
      use the AskUserQuestion tool to ask clarifying questions before proceeding.
    subagents:
      - researcher
      - reviewer
      - file_assistant
    tools:
      - Skill
      - Task
      - Read
      - Write
      - Edit
      - Bash
      - Grep
      - Glob
      - AskUserQuestion

  code-reviewer-x9y8z7w6:
    name: "Code Reviewer"
    description: "Specialized agent for thorough code reviews and security analysis"
    system_prompt: |
      You are a senior code reviewer. Your primary focus is:
      - Security vulnerabilities (OWASP Top 10)
      - Performance optimization opportunities
      - Code quality and maintainability
      - Best practices and design patterns

      Always provide actionable feedback with severity levels.
    subagents:
      - reviewer
      - researcher
    tools:  # Read-only tools only
      - Skill
      - Task
      - Read
      - Grep
      - Glob
    cwd: ../..  # Relative to agents.yaml (agent/) → backend/ → project root

  doc-writer-m5n6o7p8:
    name: "Documentation Writer"
    description: "Specialized agent for generating and improving documentation"
    system_prompt: |
      You are a technical documentation specialist. You excel at:
      - Writing clear, comprehensive documentation
      - Creating API references and guides
      - Generating code comments and docstrings
      - Creating diagrams and architecture docs
    subagents:
      - researcher
      - file_assistant
    tools:
      - Skill
      - Task
      - Read
      - Write
      - Grep
      - Glob

  research-agent-q1r2s3t4:
    name: "Code Researcher"
    description: "Read-only agent for exploring and understanding codebases"
    system_prompt: |
      You are a code research specialist. Your role is to:
      - Explore and understand codebases
      - Find patterns and relationships
      - Answer questions about code structure
      - Provide detailed analysis without making changes
    subagents:
      - researcher
      - file_assistant
    tools:  # Read-only tools only
      - Skill
      - Task
      - Read
      - Grep
      - Glob
    model: haiku

  sandbox-agent-s4ndb0x1:
    name: "Sandbox Agent"
    description: "Agent with restricted file permissions for testing"
    system_prompt: |
      You are a sandboxed assistant with restricted file permissions.
      You can only write to /tmp and the current working directory.
    subagents:
      - researcher
      - file_assistant
    cwd: "../tests"
    # Inherits with_permissions: true and allowed_directories: [/tmp] from _defaults
